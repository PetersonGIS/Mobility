<!DOCTYPE html>
<html>
<head>
  <title>Mobility</title>
  <link rel="stylesheet" href="https://openlayers.org/en/v4.6.4/css/ol.css" type="text/css">
    <!-- The line below is only needed for old environments like Internet Explorer and Android 4.x -->
    <script src="https://cdn.polyfill.io/v2/polyfill.min.js?features=requestAnimationFrame,Element.prototype.classList,URL"></script>
    <script src="https://openlayers.org/en/v4.6.4/build/ol.js"></script>
  <style>
    html, body {
      height: 100%;
      margin: 0;
    }
    #map {
      width: 100%;
      height: 100%;
    }
  </style>
</head>
<body>
  <div id="map"></div>
  <script src="https://cdn.polyfill.io/v2/polyfill.min.js?features=fetch,Promise"></script>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/openlayers/4.6.4/ol.js"></script>
  <script src="https://rawgit.com/boundlessgeo/ol-mapbox-style/v2.10.1/dist/olms.js"></script>
  <script>
  var tilegrid = ol.tilegrid.createXYZ({tileSize: 512, maxZoom: 22});
  var layer = new ol.layer.VectorTile({
    source: new ol.source.VectorTile({
      format: new ol.format.MVT(),
      tileGrid: tilegrid,
      tilePixelRatio: 8,
        url: 'https://osm.tegola.io/capabilities/osm.json'
    })
  });
  var map = new ol.Map({
    target: 'map',
    view: new ol.View({
      center: ol.proj.fromLonLat([
        7.1119,
        50.7377
      ]),
      zoom: 11.5,
      maxResolution: 78271.51696402048
    })
  });
  fetch('https://rawgit.com/PetersonGIS/Mobility/master/Mobility.json').then(function(response) {
    response.json().then(function(glStyle) {
      olms.applyBackground(map, glStyle);
      olms.applyStyle(layer, glStyle, 'osm').then(function() {
        map.addLayer(layer);
      });
    });
  });
  </script>
</body>
</html>
